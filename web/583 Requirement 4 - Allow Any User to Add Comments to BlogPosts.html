<html><head><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.4.1/components/image.min.css"></head><body><div class="container"><div class="row"><div class="col-md-10 col-md-offset-1 ui image"><p class="lead"><p>1. Create a <code>CommentForm</code> in the form.py file it will only contain a single <code>CKEditorField</code> for users to write their comments.</p><p>This is what you're aiming to achieve:</p><figure><img src="https://img-c.udemycdn.com/redactor/raw/2020-10-22_15-35-29-2cc736ac9155f629ac2c27e0d50436ff.gif"></figure><p>Hint: You might need to check the <a href="https://flask-ckeditor.readthedocs.io/en/latest/basic.html" rel="noopener noreferrer" target="_blank">documentation</a> or day 67 to see how we implement the CKEditor. </p><p><a href="https://gist.github.com/angelabauer/0fd2d9d5aaa89c7497ec7c74f2afecea" rel="noopener noreferrer" target="_blank">SOLUTION</a></p><p><br></p><p>The next step is to allow users to leave a comment and save the comment. Now that we've seen how relationships can be established between tables in our database. Let's step up our relationships to create a new Table where any user can write comments to our blog posts. </p><p>2. Create a Table called <code>Comment</code> where the <code>tablename</code> is <code>"comments"</code>. It should contain an <code>id</code> and a <code>text</code> property which will be the primary key and the text entered into the CKEditor.</p><p><a href="https://gist.github.com/angelabauer/a6047516bdbec2ed14e0bffee87276fc" rel="noopener noreferrer" target="_blank">SOLUTION</a></p><p><br></p><p>3. Establish a One to Many relationship Between the <code>User</code> Table (Parent) and the <code>Comment</code> table (Child). Where One <code>User</code> is linked to Many <code>Comment</code> objects. </p><p>Hint:</p><figure><img src="https://img-c.udemycdn.com/redactor/raw/2020-10-22_15-45-17-5f51ea08a78ebb028f2987c0cfe6e127.png"></figure><p><br></p><p><a href="https://gist.github.com/angelabauer/907bfbed5671b8d5535f2c4f8befd3f1" rel="noopener noreferrer" target="_blank">SOLUTION</a></p><p><br></p><p>4. Establish a One to Many relationship between each <code>BlogPost</code> object (Parent) and <code>Comment</code> object (Child). Where each <code>BlogPost</code> can have many associated <code>Comment</code> objects.</p><p>Hint:</p><figure><img src="https://img-c.udemycdn.com/redactor/raw/2020-10-22_15-53-08-d43ba717045d80dc00fa25c980c89a2b.png"></figure><p> </p><p><a href="https://gist.github.com/angelabauer/786cdab9a2a78537ae74fcb2ff8f02cc" rel="noopener noreferrer" target="_blank">SOLUTION</a></p><p><br></p><p>5. At this point, with a new Table added, it's a good idea to <strong>delete</strong> the existing blog.db entirely and to use the line db.create_all() to create all the tables from scratch.</p><p>This means you should create a new admin user (id == 1), a new blog post and another user who will make some comments.</p><p>e.g.</p><p>Register admin user first:</p><figure><img src="https://img-c.udemycdn.com/redactor/raw/2020-10-22_15-59-34-be9fdf73918d75ddad5f35d59ff8f0b5.png"></figure><p><br></p><p>Register a new blog reader user:</p><figure><img src="https://img-c.udemycdn.com/redactor/raw/2020-10-22_16-00-11-108a9e6c65415fc67d9a6ac959fd8e41.png"></figure><p>Create a new blog post:</p><figure><img src="https://img-c.udemycdn.com/redactor/raw/2020-10-22_16-01-45-445869de05f0a71427a2bd75e8ae087e.png"></figure><p><br></p><p>6. Log in as your John Doe user (or any user that is not the primary user) and make a comment on a blog post. In order for this to work, you will need to update the <code>/post/&lt;int:post_id&gt;</code> route. Make sure that only authenticated (logged-in) users can save their comment. Otherwise, they should see a flash message telling them to log in and redirect them to the <code>/login</code> route.</p><p>This is what you are aiming for:</p><figure><img src="https://img-c.udemycdn.com/redactor/raw/2020-10-22_16-09-42-ca1ef047568756bcb01576617ce43fd2.gif"></figure><figure><img src="https://img-c.udemycdn.com/redactor/raw/2020-10-22_16-11-41-4c30a17bc8198e5e420513a68ac0afd7.gif"></figure><p><br></p><p><a href="https://gist.github.com/angelabauer/96ca40c2b196b5c6020ae7ad4805cc74" rel="noopener noreferrer" target="_blank">SOLUTION</a></p><p><br></p><p>7. Update the code in post.html to display all the comments associated with the blog post.</p><p>This is what you're aiming for:</p><figure><img src="https://img-c.udemycdn.com/redactor/raw/2020-10-22_16-19-09-5cd97581a5561ba2d9a52f06024ecffe.gif"></figure><p>HINT 1: Don't worry about the commenter image just yet.</p><p>HINT 2: <code>comments</code> is a property of each blog post, you can treat it like a List.</p><p>HINT 3: The text of each comment is created from the CKEditor just like the body of each blog post so it will be saved in HTML format. </p><p><a href="https://gist.github.com/angelabauer/3c17f838b4055f74b3fe2ce0422a9156" rel="noopener noreferrer" target="_blank">SOLUTION</a></p><p><br></p><p>Gravatar images are used across the internet to provide an avatar image for blog commenters. </p><p>e.g. Check out the comments section of this blog post:</p><figure><img src="https://img-c.udemycdn.com/redactor/raw/2020-10-22_16-27-35-19a853ab9116d6fbf62c77a2b4bd8373.png"></figure><p>Gravatar allows you to change the image that you use across the blog websites that use Gravatar here: http://en.gravatar.com/</p><p>It's super simple to implement into a Flask application. </p><p>7. Use the <a href="https://pythonhosted.org/Flask-Gravatar/" rel="noopener noreferrer" target="_blank">Gravatar docs here</a> to add Gravatar images into your comments section. </p><p>This is what you should end up with:</p><figure><img src="https://img-c.udemycdn.com/redactor/raw/2020-10-22_16-32-53-16983961ed0d342c46cc0805ce74fc0a.png"></figure><p>HINT: <a href="http://en.gravatar.com/site/implement/images" rel="noopener noreferrer" target="_blank">http://en.gravatar.com/site/implement/images</a></p><p><a href="https://gist.github.com/angelabauer/70d5fa9b62654cd40f4df92f3a196a02" rel="noopener noreferrer" target="_blank">SOLUTION</a></p><p><br></p><p><a href="https://repl.it/@appbrewery/blog-with-users-end" rel="noopener noreferrer" target="_blank">COMPLETED&nbsp;PROJECT</a></p></p></div></div></div></body></html>